{"ast":null,"code":"var _jsxFileName = \"/Users/naagalgates/Desktop/acme-challenge/Acme/src/views/CustomerDetail.jsx\";\nimport React, { Component } from \"react\";\nimport NotificationSystem from \"react-notification-system\";\nimport moment from \"moment\";\nimport { Grid, Row, Col, Table, FormGroup, ControlLabel, FormControl } from \"react-bootstrap\";\nimport Card from \"components/Card/Card.jsx\";\nimport Button from \"components/CustomButton/CustomButton.jsx\";\nimport { style } from \"variables/Variables.jsx\";\n\nclass CustomerDetail extends Component {\n  constructor(props) {\n    const match = props.match; // console.log(match);\n\n    super(props);\n    this.state = {\n      _notificationSystem: null,\n      doc_list: [],\n      doc_name: \"\",\n      fileInput: \"\",\n      file_upload: {},\n      cust_id: match.params.id\n    };\n    this.upload = this.upload.bind(this);\n    this.getFile = this.getFile.bind(this);\n  }\n\n  handleChange(e) {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  }\n\n  getFile(e) {\n    e.preventDefault();\n    let reader = new FileReader();\n    let file = e.target.files[0];\n\n    reader.onloadend = theFile => {\n      var data = {\n        blob: theFile.target.result.split(\",\")[1],\n        name: file.name,\n        type: file.type\n      }; // console.log(data);\n\n      this.setState({\n        file_upload: data\n      });\n    };\n\n    reader.readAsDataURL(file);\n  }\n\n  upload() {\n    let params = {\n      doc_name: this.state.doc_name,\n      blob: this.state.file_upload.blob,\n      file_name: this.state.file_upload.name,\n      file_type: this.state.file_upload.file_type,\n      cust_id: this.state.cust_id,\n      created_date: new Date().toString()\n    };\n    console.log(params);\n    let file = params.file_name.toString();\n    console.log(file);\n    axios.post(\"https://8tqsj5foy6.execute-api.ap-southeast-2.amazonaws.com/default/acme-upload\", file).then(response => {\n      console.log('Fetching Pre Signed URL : ', response.data.url);\n      const options = {\n        headers: {\n          \"Accept\": \"*\",\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      }; // Using PUT request to upload the file to s3 using the pre-signed URL\n\n      axios.put(response.data.url, files, options).then(response => {\n        console.log(\"Upload Success\", response);\n        this.setState({\n          show: true,\n          message: 'File has been uploaded successfully'\n        });\n      });\n    }); // const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\n    // fetch(\n    //   proxyurl +\n    //     \"https://pytpnxf5zi.execute-api.ap-southeast-2.amazonaws.com/DEV/\",\n    //   {\n    //     method: \"post\",\n    //     body: JSON.stringify(params),\n    //     headers: { \"Content-Type\": \"application/json\" }\n    //   }\n    // )\n    //   .then(response => response.json())\n    //   .then(data => {\n    //     // console.log(data);\n    //     this.getDocumentList();\n    //     this.setState({ doc_name: \"\", fileInput: \"\" });\n    //     this.state._notificationSystem.addNotification({\n    //       title: <span data-notify=\"icon\" className=\"pe-7s-check\" />,\n    //       message: <div>Document Uploaded Successfully</div>,\n    //       level: \"success\",\n    //       position: \"tr\",\n    //       autoDismiss: 15\n    //     });\n    //   });\n  }\n\n  getDocumentList() {\n    const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\n    fetch(proxyurl + \"https://pytpnxf5zi.execute-api.ap-southeast-2.amazonaws.com/DEV?from=details&cust_id=\" + this.state.cust_id, {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(response => response.json()).then(data => {\n      this.setState({\n        doc_list: data.hits\n      }); // console.log(data);\n    });\n  }\n\n  downloadDocumnet(file_name) {\n    const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\n    fetch(proxyurl + \"https://pytpnxf5zi.execute-api.ap-southeast-2.amazonaws.com/DEV?from=download&file_name=\" + file_name, {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(response => response.json()).then(data => {\n      // console.log(data);\n      window.open(data.body, \"_blank\");\n    });\n  }\n\n  deleteDocument(doc_id) {\n    const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\n    fetch(proxyurl + \"https://pytpnxf5zi.execute-api.ap-southeast-2.amazonaws.com/DEV?doc_id=\" + doc_id, {\n      method: \"delete\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(response => response.json()).then(data => {\n      this.getDocumentList(); // console.log(data);\n\n      this.state._notificationSystem.addNotification({\n        title: React.createElement(\"span\", {\n          \"data-notify\": \"icon\",\n          className: \"pe-7s-close-circle\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161\n          },\n          __self: this\n        }),\n        message: React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 162\n          },\n          __self: this\n        }, \"Document Deleted Successfully\"),\n        level: \"info\",\n        position: \"tr\",\n        autoDismiss: 15\n      });\n    });\n  }\n\n  componentDidMount() {\n    this.setState({\n      _notificationSystem: this.refs.notificationSystem\n    });\n    var _notificationSystem = this.refs.notificationSystem;\n    this.getDocumentList();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, React.createElement(NotificationSystem, {\n      ref: \"notificationSystem\",\n      style: style,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }), React.createElement(Grid, {\n      fluid: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, React.createElement(Col, {\n      md: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(Card, {\n      title: \"Customer Detail\",\n      category: \"\",\n      ctTableFullWidth: true,\n      ctTableResponsive: true,\n      content: React.createElement(\"div\", {\n        style: {\n          padding: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, React.createElement(ControlLabel, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, \"Document Name\"), React.createElement(FormControl, {\n        type: \"text\",\n        name: \"doc_name\",\n        bsClass: \"form-control\",\n        value: this.state.doc_name,\n        onChange: e => this.handleChange(e),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"col-md-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, React.createElement(ControlLabel, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, \"Document\"), React.createElement(FormControl, {\n        name: \"file_path\",\n        type: \"file\",\n        bsClass: \"form-control\",\n        onChange: this.getFile,\n        ref: ref => this.state.fileInput = ref,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      })))), React.createElement(Button, {\n        bsStyle: \"info\",\n        fill: true,\n        onClick: this.upload,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, \"Update Document\"), React.createElement(\"div\", {\n        className: \"clearfix\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      })), React.createElement(Table, {\n        striped: true,\n        hover: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }, \"Document ID\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }, \"Document Name\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, \"Created Date\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }, \"Last Updated\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      }, \"Actions\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, this.state.doc_list.map((prop, key) => {\n        return React.createElement(\"tr\", {\n          key: key,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 233\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 234\n          },\n          __self: this\n        }, prop.doc_id), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 235\n          },\n          __self: this\n        }, prop.doc_name), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 236\n          },\n          __self: this\n        }, moment(prop.created_date).format(\"DD-MMM-YYYY\")), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 241\n          },\n          __self: this\n        }, moment(prop.created_date).format(\"DD-MMM-YYYY\")), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 246\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"col-md-2\",\n          onClick: () => this.downloadDocumnet(prop.doc_path),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 247\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          className: \"pe-7s-cloud-download\",\n          style: {\n            fontSize: 20\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 253\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"col-md-2\",\n          onClick: () => this.deleteDocument(prop.doc_id),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 258\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          className: \"pe-7s-trash\",\n          style: {\n            fontSize: 20\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 264\n          },\n          __self: this\n        }))));\n      })))),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    })))));\n  }\n\n}\n\nexport default CustomerDetail;","map":{"version":3,"sources":["/Users/naagalgates/Desktop/acme-challenge/Acme/src/views/CustomerDetail.jsx"],"names":["React","Component","NotificationSystem","moment","Grid","Row","Col","Table","FormGroup","ControlLabel","FormControl","Card","Button","style","CustomerDetail","constructor","props","match","state","_notificationSystem","doc_list","doc_name","fileInput","file_upload","cust_id","params","id","upload","bind","getFile","handleChange","e","setState","target","name","value","preventDefault","reader","FileReader","file","files","onloadend","theFile","data","blob","result","split","type","readAsDataURL","file_name","file_type","created_date","Date","toString","console","log","axios","post","then","response","url","options","headers","put","show","message","getDocumentList","proxyurl","fetch","json","hits","downloadDocumnet","window","open","body","deleteDocument","doc_id","method","addNotification","title","level","position","autoDismiss","componentDidMount","refs","notificationSystem","render","padding","ref","map","prop","key","format","doc_path","fontSize"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport NotificationSystem from \"react-notification-system\";\nimport moment from \"moment\";\n\nimport {\n  Grid,\n  Row,\n  Col,\n  Table,\n  FormGroup,\n  ControlLabel,\n  FormControl\n} from \"react-bootstrap\";\n\nimport Card from \"components/Card/Card.jsx\";\nimport Button from \"components/CustomButton/CustomButton.jsx\";\nimport { style } from \"variables/Variables.jsx\";\n\nclass CustomerDetail extends Component {\n  constructor(props) {\n    const { match } = props;\n    // console.log(match);\n    super(props);\n    this.state = {\n      _notificationSystem: null,\n      doc_list: [],\n      doc_name: \"\",\n      fileInput: \"\",\n      file_upload: {},\n      cust_id: match.params.id\n    };\n    this.upload = this.upload.bind(this);\n    this.getFile = this.getFile.bind(this);\n  }\n\n  handleChange(e) {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  }\n  getFile(e) {\n    e.preventDefault();\n    let reader = new FileReader();\n    let file = e.target.files[0];\n    reader.onloadend = theFile => {\n      var data = {\n        blob: theFile.target.result.split(\",\")[1],\n        name: file.name,\n        type: file.type\n      };\n      // console.log(data);\n      this.setState({ file_upload: data });\n    };\n    reader.readAsDataURL(file);\n  }\n\n  upload() {\n    let params = {\n      doc_name: this.state.doc_name,\n      blob: this.state.file_upload.blob,\n      file_name: this.state.file_upload.name,\n      file_type: this.state.file_upload.file_type,\n      cust_id: this.state.cust_id,\n      created_date: new Date().toString()\n    };\n     console.log(params);\n     let file = (params.file_name).toString();\nconsole.log(file);\n\naxios.post(\"https://8tqsj5foy6.execute-api.ap-southeast-2.amazonaws.com/default/acme-upload\",file).then((response) => {\n      console.log('Fetching Pre Signed URL : ',response.data.url);\n      const options = {\n          headers: {\n            \"Accept\":\"*\",\n            \"Content-Type\": \"multipart/form-data\"\n          }\n      };\n\n      // Using PUT request to upload the file to s3 using the pre-signed URL\n      axios.put(response.data.url, files, options).then((response) => {\n      console.log(\"Upload Success\", response);\n      this.setState({\n          show: true,\n          message:'File has been uploaded successfully'\n      })\n      });\n    });\n\n    // const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\n    // fetch(\n    //   proxyurl +\n    //     \"https://pytpnxf5zi.execute-api.ap-southeast-2.amazonaws.com/DEV/\",\n    //   {\n    //     method: \"post\",\n    //     body: JSON.stringify(params),\n    //     headers: { \"Content-Type\": \"application/json\" }\n    //   }\n    // )\n    //   .then(response => response.json())\n    //   .then(data => {\n    //     // console.log(data);\n    //     this.getDocumentList();\n    //     this.setState({ doc_name: \"\", fileInput: \"\" });\n    //     this.state._notificationSystem.addNotification({\n    //       title: <span data-notify=\"icon\" className=\"pe-7s-check\" />,\n    //       message: <div>Document Uploaded Successfully</div>,\n    //       level: \"success\",\n    //       position: \"tr\",\n    //       autoDismiss: 15\n    //     });\n    //   });\n  }\n  getDocumentList() {\n    const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\n    fetch(\n      proxyurl +\n        \"https://pytpnxf5zi.execute-api.ap-southeast-2.amazonaws.com/DEV?from=details&cust_id=\" +\n        this.state.cust_id,\n      {\n        headers: { \"Content-Type\": \"application/json\" }\n      }\n    )\n      .then(response => response.json())\n      .then(data => {\n        this.setState({ doc_list: data.hits });\n        // console.log(data);\n      });\n  }\n  downloadDocumnet(file_name) {\n    const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\n    fetch(\n      proxyurl +\n        \"https://pytpnxf5zi.execute-api.ap-southeast-2.amazonaws.com/DEV?from=download&file_name=\" +\n        file_name,\n      {\n        headers: { \"Content-Type\": \"application/json\" }\n      }\n    )\n      .then(response => response.json())\n      .then(data => {\n        // console.log(data);\n        window.open(data.body, \"_blank\");\n      });\n  }\n  deleteDocument(doc_id) {\n    const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\n    fetch(\n      proxyurl +\n        \"https://pytpnxf5zi.execute-api.ap-southeast-2.amazonaws.com/DEV?doc_id=\" +\n        doc_id,\n      {\n        method: \"delete\",\n        headers: { \"Content-Type\": \"application/json\" }\n      }\n    )\n      .then(response => response.json())\n      .then(data => {\n        this.getDocumentList();\n        // console.log(data);\n        this.state._notificationSystem.addNotification({\n          title: <span data-notify=\"icon\" className=\"pe-7s-close-circle\" />,\n          message: <div>Document Deleted Successfully</div>,\n          level: \"info\",\n          position: \"tr\",\n          autoDismiss: 15\n        });\n      });\n  }\n  componentDidMount() {\n    this.setState({ _notificationSystem: this.refs.notificationSystem });\n    var _notificationSystem = this.refs.notificationSystem;\n    this.getDocumentList();\n  }\n  render() {\n    return (\n      <div className=\"content\">\n        <NotificationSystem ref=\"notificationSystem\" style={style} />\n        <Grid fluid>\n          <Row>\n            <Col md={12}>\n              <Card\n                title=\"Customer Detail\"\n                category=\"\"\n                ctTableFullWidth\n                ctTableResponsive\n                content={\n                  <div style={{ padding: 20 }}>\n                    <form>\n                      <div className=\"row\">\n                        <div className=\"col-md-4\">\n                          <FormGroup>\n                            <ControlLabel>Document Name</ControlLabel>\n                            <FormControl\n                              type=\"text\"\n                              name=\"doc_name\"\n                              bsClass=\"form-control\"\n                              value={this.state.doc_name}\n                              onChange={e => this.handleChange(e)}\n                            />\n                          </FormGroup>\n                        </div>\n                        <div className=\"col-md-4\">\n                          <FormGroup>\n                            <ControlLabel>Document</ControlLabel>\n                            <FormControl\n                              name=\"file_path\"\n                              type=\"file\"\n                              bsClass=\"form-control\"\n                              onChange={this.getFile}\n                              ref={ref => (this.state.fileInput = ref)}\n                            />\n                          </FormGroup>\n                        </div>\n                      </div>\n                      <Button bsStyle=\"info\" fill onClick={this.upload}>\n                        Update Document\n                      </Button>\n                      <div className=\"clearfix\" />\n                    </form>\n                    <Table striped hover>\n                      <thead>\n                        <tr>\n                          <th>Document ID</th>\n                          <th>Document Name</th>\n                          <th>Created Date</th>\n                          <th>Last Updated</th>\n                          <th>Actions</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        {this.state.doc_list.map((prop, key) => {\n                          return (\n                            <tr key={key}>\n                              <td>{prop.doc_id}</td>\n                              <td>{prop.doc_name}</td>\n                              <td>\n                                {moment(prop.created_date).format(\n                                  \"DD-MMM-YYYY\"\n                                )}\n                              </td>\n                              <td>\n                                {moment(prop.created_date).format(\n                                  \"DD-MMM-YYYY\"\n                                )}\n                              </td>\n                              <td>\n                                <div\n                                  className=\"col-md-2\"\n                                  onClick={() =>\n                                    this.downloadDocumnet(prop.doc_path)\n                                  }\n                                >\n                                  <i\n                                    className=\"pe-7s-cloud-download\"\n                                    style={{ fontSize: 20 }}\n                                  />\n                                </div>\n                                <div\n                                  className=\"col-md-2\"\n                                  onClick={() =>\n                                    this.deleteDocument(prop.doc_id)\n                                  }\n                                >\n                                  <i\n                                    className=\"pe-7s-trash\"\n                                    style={{ fontSize: 20 }}\n                                  />\n                                </div>\n                              </td>\n                            </tr>\n                          );\n                        })}\n                      </tbody>\n                    </Table>\n                  </div>\n                }\n              />\n            </Col>\n          </Row>\n        </Grid>\n      </div>\n    );\n  }\n}\n\nexport default CustomerDetail;\n"]},"metadata":{},"sourceType":"module"}