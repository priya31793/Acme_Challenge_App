{"ast":null,"code":"var _jsxFileName = \"/Users/naagalgates/Desktop/acme-challenge/Acme/src/views/CustomerDetail.jsx\";\nimport React, { Component } from \"react\";\nimport NotificationSystem from \"react-notification-system\";\nimport moment from \"moment\";\nimport { Grid, Row, Col, Table, FormGroup, ControlLabel, FormControl } from \"react-bootstrap\";\nimport Card from \"components/Card/Card.jsx\";\nimport Button from \"components/CustomButton/CustomButton.jsx\";\nimport { style } from \"variables/Variables.jsx\";\n\nclass CustomerDetail extends Component {\n  constructor(props) {\n    const match = props.match; // console.log(match);\n\n    super(props);\n    this.state = {\n      _notificationSystem: null,\n      doc_list: [],\n      doc_name: \"\",\n      fileInput: \"\",\n      file_upload: {},\n      cust_id: match.params.id\n    };\n    this.upload = this.upload.bind(this);\n    this.getFile = this.getFile.bind(this);\n  }\n\n  handleChange(e) {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  }\n\n  getFile(e) {\n    e.preventDefault();\n    let reader = new FileReader();\n    let file = e.target.files[0];\n\n    reader.onloadend = theFile => {\n      var data = {\n        blob: theFile.target.result.split(\",\")[1],\n        name: file.name,\n        type: file.type\n      }; // console.log(data);\n\n      this.setState({\n        file_upload: data\n      });\n    };\n\n    reader.readAsDataURL(file);\n  }\n\n  upload() {\n    let params = {\n      doc_name: this.state.doc_name,\n      blob: this.state.file_upload.blob,\n      file_name: this.state.file_upload.name,\n      file_type: this.state.file_upload.file_type,\n      cust_id: this.state.cust_id,\n      created_date: new Date().toString()\n    };\n    console.log(params);\n    console.log(params.file_name);\n    const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\n    fetch(proxyurl + \"https://8tqsj5foy6.execute-api.ap-southeast-2.amazonaws.com/default/acme-upload\", params.file_name) //.then(response => response.json())\n    .then(response => {\n      console.log('hii', response);\n      const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\n      fetch(proxyurl + response.data.url, params, {\n        method: \"put\",\n        headers: {\n          \"Accept\": \"*\",\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      }).then(response => {\n        console.log(response);\n        this.getDocumentList();\n        this.setState({\n          doc_name: \"\",\n          fileInput: \"\"\n        });\n\n        this.state._notificationSystem.addNotification({\n          title: React.createElement(\"span\", {\n            \"data-notify\": \"icon\",\n            className: \"pe-7s-check\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 96\n            },\n            __self: this\n          }),\n          message: React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 97\n            },\n            __self: this\n          }, \"Document Uploaded Successfully\"),\n          level: \"success\",\n          position: \"tr\",\n          autoDismiss: 15\n        });\n      });\n    }); // const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\n    // fetch(\n    //   proxyurl +\n    //     \"https://pytpnxf5zi.execute-api.ap-southeast-2.amazonaws.com/DEV/\",\n    //   {\n    //     method: \"post\",\n    //     body: JSON.stringify(params),\n    //     headers: { \"Content-Type\": \"application/json\" }\n    //   }\n    // )\n    //   .then(response => response.json())\n    //   .then(data => {\n    //     // console.log(data);\n    //     this.getDocumentList();\n    //     this.setState({ doc_name: \"\", fileInput: \"\" });\n    //     this.state._notificationSystem.addNotification({\n    //       title: <span data-notify=\"icon\" className=\"pe-7s-check\" />,\n    //       message: <div>Document Uploaded Successfully</div>,\n    //       level: \"success\",\n    //       position: \"tr\",\n    //       autoDismiss: 15\n    //     });\n    //   });\n  }\n\n  getDocumentList() {\n    const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\n    fetch(proxyurl + \"https://pytpnxf5zi.execute-api.ap-southeast-2.amazonaws.com/DEV?from=details&cust_id=\" + this.state.cust_id, {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(response => response.json()).then(data => {\n      this.setState({\n        doc_list: data.hits\n      }); // console.log(data);\n    });\n  }\n\n  downloadDocumnet(file_name) {\n    const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\n    fetch(proxyurl + \"https://pytpnxf5zi.execute-api.ap-southeast-2.amazonaws.com/DEV?from=download&file_name=\" + file_name, {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(response => response.json()).then(data => {\n      // console.log(data);\n      window.open(data.body, \"_blank\");\n    });\n  }\n\n  deleteDocument(doc_id) {\n    const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\n    fetch(proxyurl + \"https://pytpnxf5zi.execute-api.ap-southeast-2.amazonaws.com/DEV?doc_id=\" + doc_id, {\n      method: \"delete\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(response => response.json()).then(data => {\n      this.getDocumentList(); // console.log(data);\n\n      this.state._notificationSystem.addNotification({\n        title: React.createElement(\"span\", {\n          \"data-notify\": \"icon\",\n          className: \"pe-7s-close-circle\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 181\n          },\n          __self: this\n        }),\n        message: React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 182\n          },\n          __self: this\n        }, \"Document Deleted Successfully\"),\n        level: \"info\",\n        position: \"tr\",\n        autoDismiss: 15\n      });\n    });\n  }\n\n  componentDidMount() {\n    this.setState({\n      _notificationSystem: this.refs.notificationSystem\n    });\n    var _notificationSystem = this.refs.notificationSystem;\n    this.getDocumentList();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, React.createElement(NotificationSystem, {\n      ref: \"notificationSystem\",\n      style: style,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }), React.createElement(Grid, {\n      fluid: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, React.createElement(Col, {\n      md: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, React.createElement(Card, {\n      title: \"Customer Detail\",\n      category: \"\",\n      ctTableFullWidth: true,\n      ctTableResponsive: true,\n      content: React.createElement(\"div\", {\n        style: {\n          padding: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, React.createElement(ControlLabel, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, \"Document Name\"), React.createElement(FormControl, {\n        type: \"text\",\n        name: \"doc_name\",\n        bsClass: \"form-control\",\n        value: this.state.doc_name,\n        onChange: e => this.handleChange(e),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"col-md-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }, React.createElement(ControlLabel, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }, \"Document\"), React.createElement(FormControl, {\n        name: \"file_path\",\n        type: \"file\",\n        bsClass: \"form-control\",\n        onChange: this.getFile,\n        ref: ref => this.state.fileInput = ref,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      })))), React.createElement(Button, {\n        bsStyle: \"info\",\n        fill: true,\n        onClick: this.upload,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }, \"Update Document\"), React.createElement(\"div\", {\n        className: \"clearfix\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      })), React.createElement(Table, {\n        striped: true,\n        hover: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }, \"Document ID\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }, \"Document Name\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, \"Created Date\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }, \"Last Updated\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, \"Actions\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }, this.state.doc_list.map((prop, key) => {\n        return React.createElement(\"tr\", {\n          key: key,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 253\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 254\n          },\n          __self: this\n        }, prop.doc_id), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 255\n          },\n          __self: this\n        }, prop.doc_name), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 256\n          },\n          __self: this\n        }, moment(prop.created_date).format(\"DD-MMM-YYYY\")), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 261\n          },\n          __self: this\n        }, moment(prop.created_date).format(\"DD-MMM-YYYY\")), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 266\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"col-md-2\",\n          onClick: () => this.downloadDocumnet(prop.doc_path),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 267\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          className: \"pe-7s-cloud-download\",\n          style: {\n            fontSize: 20\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 273\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"col-md-2\",\n          onClick: () => this.deleteDocument(prop.doc_id),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 278\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          className: \"pe-7s-trash\",\n          style: {\n            fontSize: 20\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 284\n          },\n          __self: this\n        }))));\n      })))),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    })))));\n  }\n\n}\n\nexport default CustomerDetail;","map":{"version":3,"sources":["/Users/naagalgates/Desktop/acme-challenge/Acme/src/views/CustomerDetail.jsx"],"names":["React","Component","NotificationSystem","moment","Grid","Row","Col","Table","FormGroup","ControlLabel","FormControl","Card","Button","style","CustomerDetail","constructor","props","match","state","_notificationSystem","doc_list","doc_name","fileInput","file_upload","cust_id","params","id","upload","bind","getFile","handleChange","e","setState","target","name","value","preventDefault","reader","FileReader","file","files","onloadend","theFile","data","blob","result","split","type","readAsDataURL","file_name","file_type","created_date","Date","toString","console","log","proxyurl","fetch","then","response","url","method","headers","getDocumentList","addNotification","title","message","level","position","autoDismiss","json","hits","downloadDocumnet","window","open","body","deleteDocument","doc_id","componentDidMount","refs","notificationSystem","render","padding","ref","map","prop","key","format","doc_path","fontSize"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport NotificationSystem from \"react-notification-system\";\nimport moment from \"moment\";\n\nimport {\n  Grid,\n  Row,\n  Col,\n  Table,\n  FormGroup,\n  ControlLabel,\n  FormControl\n} from \"react-bootstrap\";\n\nimport Card from \"components/Card/Card.jsx\";\nimport Button from \"components/CustomButton/CustomButton.jsx\";\nimport { style } from \"variables/Variables.jsx\";\n\nclass CustomerDetail extends Component {\n  constructor(props) {\n    const { match } = props;\n    // console.log(match);\n    super(props);\n    this.state = {\n      _notificationSystem: null,\n      doc_list: [],\n      doc_name: \"\",\n      fileInput: \"\",\n      file_upload: {},\n      cust_id: match.params.id\n    };\n    this.upload = this.upload.bind(this);\n    this.getFile = this.getFile.bind(this);\n  }\n\n  handleChange(e) {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  }\n  getFile(e) {\n    e.preventDefault();\n    let reader = new FileReader();\n    let file = e.target.files[0];\n    reader.onloadend = theFile => {\n      var data = {\n        blob: theFile.target.result.split(\",\")[1],\n        name: file.name,\n        type: file.type\n      };\n      // console.log(data);\n      this.setState({ file_upload: data });\n    };\n    reader.readAsDataURL(file);\n  }\n\n  upload() {\n    let params = {\n      doc_name: this.state.doc_name,\n      blob: this.state.file_upload.blob,\n      file_name: this.state.file_upload.name,\n      file_type: this.state.file_upload.file_type,\n      cust_id: this.state.cust_id,\n      created_date: new Date().toString()\n    };\n     console.log(params);\nconsole.log(params.file_name);\n    const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\n    fetch(\n      proxyurl +\n        \"https://8tqsj5foy6.execute-api.ap-southeast-2.amazonaws.com/default/acme-upload\",\n        params.file_name\n    )\n      //.then(response => response.json())\n      .then(response => {\n         console.log('hii',response);\n\n              const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\n              fetch(\n                proxyurl + response.data.url,\n                  params,\n                  {\n                      method: \"put\",\n                      headers: {\n              \"Accept\":\"*\",\n              \"Content-Type\": \"multipart/form-data\"\n            }\n                    }\n              )\n                .then(response => {\n                   console.log(response);\n\n                      this.getDocumentList();\n                      this.setState({ doc_name: \"\", fileInput: \"\" });\n                      this.state._notificationSystem.addNotification({\n                        title: <span data-notify=\"icon\" className=\"pe-7s-check\" />,\n                        message: <div>Document Uploaded Successfully</div>,\n                        level: \"success\",\n                        position: \"tr\",\n                        autoDismiss: 15\n                      });\n\n\n                });\n\n\n      });\n\n    // const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\n    // fetch(\n    //   proxyurl +\n    //     \"https://pytpnxf5zi.execute-api.ap-southeast-2.amazonaws.com/DEV/\",\n    //   {\n    //     method: \"post\",\n    //     body: JSON.stringify(params),\n    //     headers: { \"Content-Type\": \"application/json\" }\n    //   }\n    // )\n    //   .then(response => response.json())\n    //   .then(data => {\n    //     // console.log(data);\n    //     this.getDocumentList();\n    //     this.setState({ doc_name: \"\", fileInput: \"\" });\n    //     this.state._notificationSystem.addNotification({\n    //       title: <span data-notify=\"icon\" className=\"pe-7s-check\" />,\n    //       message: <div>Document Uploaded Successfully</div>,\n    //       level: \"success\",\n    //       position: \"tr\",\n    //       autoDismiss: 15\n    //     });\n    //   });\n  }\n  getDocumentList() {\n    const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\n    fetch(\n      proxyurl +\n        \"https://pytpnxf5zi.execute-api.ap-southeast-2.amazonaws.com/DEV?from=details&cust_id=\" +\n        this.state.cust_id,\n      {\n        headers: { \"Content-Type\": \"application/json\" }\n      }\n    )\n      .then(response => response.json())\n      .then(data => {\n        this.setState({ doc_list: data.hits });\n        // console.log(data);\n      });\n  }\n  downloadDocumnet(file_name) {\n    const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\n    fetch(\n      proxyurl +\n        \"https://pytpnxf5zi.execute-api.ap-southeast-2.amazonaws.com/DEV?from=download&file_name=\" +\n        file_name,\n      {\n        headers: { \"Content-Type\": \"application/json\" }\n      }\n    )\n      .then(response => response.json())\n      .then(data => {\n        // console.log(data);\n        window.open(data.body, \"_blank\");\n      });\n  }\n  deleteDocument(doc_id) {\n    const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\n    fetch(\n      proxyurl +\n        \"https://pytpnxf5zi.execute-api.ap-southeast-2.amazonaws.com/DEV?doc_id=\" +\n        doc_id,\n      {\n        method: \"delete\",\n        headers: { \"Content-Type\": \"application/json\" }\n      }\n    )\n      .then(response => response.json())\n      .then(data => {\n        this.getDocumentList();\n        // console.log(data);\n        this.state._notificationSystem.addNotification({\n          title: <span data-notify=\"icon\" className=\"pe-7s-close-circle\" />,\n          message: <div>Document Deleted Successfully</div>,\n          level: \"info\",\n          position: \"tr\",\n          autoDismiss: 15\n        });\n      });\n  }\n  componentDidMount() {\n    this.setState({ _notificationSystem: this.refs.notificationSystem });\n    var _notificationSystem = this.refs.notificationSystem;\n    this.getDocumentList();\n  }\n  render() {\n    return (\n      <div className=\"content\">\n        <NotificationSystem ref=\"notificationSystem\" style={style} />\n        <Grid fluid>\n          <Row>\n            <Col md={12}>\n              <Card\n                title=\"Customer Detail\"\n                category=\"\"\n                ctTableFullWidth\n                ctTableResponsive\n                content={\n                  <div style={{ padding: 20 }}>\n                    <form>\n                      <div className=\"row\">\n                        <div className=\"col-md-4\">\n                          <FormGroup>\n                            <ControlLabel>Document Name</ControlLabel>\n                            <FormControl\n                              type=\"text\"\n                              name=\"doc_name\"\n                              bsClass=\"form-control\"\n                              value={this.state.doc_name}\n                              onChange={e => this.handleChange(e)}\n                            />\n                          </FormGroup>\n                        </div>\n                        <div className=\"col-md-4\">\n                          <FormGroup>\n                            <ControlLabel>Document</ControlLabel>\n                            <FormControl\n                              name=\"file_path\"\n                              type=\"file\"\n                              bsClass=\"form-control\"\n                              onChange={this.getFile}\n                              ref={ref => (this.state.fileInput = ref)}\n                            />\n                          </FormGroup>\n                        </div>\n                      </div>\n                      <Button bsStyle=\"info\" fill onClick={this.upload}>\n                        Update Document\n                      </Button>\n                      <div className=\"clearfix\" />\n                    </form>\n                    <Table striped hover>\n                      <thead>\n                        <tr>\n                          <th>Document ID</th>\n                          <th>Document Name</th>\n                          <th>Created Date</th>\n                          <th>Last Updated</th>\n                          <th>Actions</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        {this.state.doc_list.map((prop, key) => {\n                          return (\n                            <tr key={key}>\n                              <td>{prop.doc_id}</td>\n                              <td>{prop.doc_name}</td>\n                              <td>\n                                {moment(prop.created_date).format(\n                                  \"DD-MMM-YYYY\"\n                                )}\n                              </td>\n                              <td>\n                                {moment(prop.created_date).format(\n                                  \"DD-MMM-YYYY\"\n                                )}\n                              </td>\n                              <td>\n                                <div\n                                  className=\"col-md-2\"\n                                  onClick={() =>\n                                    this.downloadDocumnet(prop.doc_path)\n                                  }\n                                >\n                                  <i\n                                    className=\"pe-7s-cloud-download\"\n                                    style={{ fontSize: 20 }}\n                                  />\n                                </div>\n                                <div\n                                  className=\"col-md-2\"\n                                  onClick={() =>\n                                    this.deleteDocument(prop.doc_id)\n                                  }\n                                >\n                                  <i\n                                    className=\"pe-7s-trash\"\n                                    style={{ fontSize: 20 }}\n                                  />\n                                </div>\n                              </td>\n                            </tr>\n                          );\n                        })}\n                      </tbody>\n                    </Table>\n                  </div>\n                }\n              />\n            </Col>\n          </Row>\n        </Grid>\n      </div>\n    );\n  }\n}\n\nexport default CustomerDetail;\n"]},"metadata":{},"sourceType":"module"}