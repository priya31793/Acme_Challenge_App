{"ast":null,"code":"var _jsxFileName = \"/Users/naagalgates/Desktop/acme-challenge/Acme/src/views/CustomerDetail.jsx\";\nimport React, { Component } from \"react\";\nimport moment from \"moment\";\nimport { Grid, Row, Col, Table, FormGroup, ControlLabel, FormControl } from \"react-bootstrap\";\nimport Card from \"components/Card/Card.jsx\";\nimport Button from \"components/CustomButton/CustomButton.jsx\";\nimport { style } from \"variables/Variables.jsx\";\n\nclass CustomerDetail extends Component {\n  constructor(props) {\n    const match = props.match; // console.log(match);\n\n    super(props);\n    this.state = {\n      _notificationSystem: null,\n      doc_list: [],\n      doc_name: \"\",\n      fileInput: \"\",\n      file_upload: {},\n      cust_id: match.params.id\n    };\n    this.upload = this.upload.bind(this);\n    this.getFile = this.getFile.bind(this);\n  }\n\n  handleChange(e) {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  }\n\n  getFile(e) {\n    e.preventDefault();\n    let reader = new FileReader();\n    let file = e.target.files[0];\n\n    reader.onloadend = theFile => {\n      var data = {\n        blob: theFile.target.result.split(\",\")[1],\n        name: file.name,\n        type: file.type\n      }; // console.log(data);\n\n      this.setState({\n        file_upload: data\n      });\n    };\n\n    reader.readAsDataURL(file);\n  }\n\n  upload() {\n    let params = {\n      doc_name: this.state.doc_name,\n      blob: this.state.file_upload.blob,\n      file_name: this.state.file_upload.name,\n      file_type: this.state.file_upload.file_type,\n      cust_id: this.state.cust_id,\n      created_date: new Date().toString()\n    }; // console.log(params);\n\n    const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\n    fetch(proxyurl + \"https://pytpnxf5zi.execute-api.ap-southeast-2.amazonaws.com/DEV/\", {\n      method: \"post\",\n      body: JSON.stringify(params),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(response => response.json()).then(data => {\n      // console.log(data);\n      this.getDocumentList();\n      this.setState({\n        doc_name: \"\",\n        fileInput: \"\"\n      });\n\n      this.state._notificationSystem.addNotification({\n        title: React.createElement(\"span\", {\n          \"data-notify\": \"icon\",\n          className: \"pe-7s-check\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }),\n        message: React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        }, \"Document Uploaded Successfully\"),\n        level: \"success\",\n        position: \"tr\",\n        autoDismiss: 15\n      });\n    });\n  }\n\n  getDocumentList() {\n    const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\n    fetch(proxyurl + \"https://pytpnxf5zi.execute-api.ap-southeast-2.amazonaws.com/DEV?from=details&cust_id=\" + this.state.cust_id, {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(response => response.json()).then(data => {\n      this.setState({\n        doc_list: data.hits\n      }); // console.log(data);\n    });\n  }\n\n  downloadDocumnet(file_name) {\n    const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\n    fetch(proxyurl + \"https://pytpnxf5zi.execute-api.ap-southeast-2.amazonaws.com/DEV?from=download&file_name=\" + file_name, {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(response => response.json()).then(data => {\n      // console.log(data);\n      window.open(data.body, \"_blank\");\n    });\n  }\n\n  deleteDocument(doc_id) {\n    const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\n    fetch(proxyurl + \"https://pytpnxf5zi.execute-api.ap-southeast-2.amazonaws.com/DEV?doc_id=\" + doc_id, {\n      method: \"delete\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(response => response.json()).then(data => {\n      this.getDocumentList(); // console.log(data);\n\n      this.state._notificationSystem.addNotification({\n        title: React.createElement(\"span\", {\n          \"data-notify\": \"icon\",\n          className: \"pe-7s-close-circle\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138\n          },\n          __self: this\n        }),\n        message: React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 139\n          },\n          __self: this\n        }, \"Document Deleted Successfully\"),\n        level: \"info\",\n        position: \"tr\",\n        autoDismiss: 15\n      });\n    });\n  }\n\n  componentDidMount() {\n    this.setState({\n      _notificationSystem: this.refs.notificationSystem\n    });\n    var _notificationSystem = this.refs.notificationSystem;\n    this.getDocumentList();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(NotificationSystem, {\n      ref: \"notificationSystem\",\n      style: style,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }), React.createElement(Grid, {\n      fluid: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(Col, {\n      md: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(Card, {\n      title: \"Customer Detail\",\n      category: \"\",\n      ctTableFullWidth: true,\n      ctTableResponsive: true,\n      content: React.createElement(\"div\", {\n        style: {\n          padding: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, React.createElement(ControlLabel, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, \"Document Name\"), React.createElement(FormControl, {\n        type: \"text\",\n        name: \"doc_name\",\n        bsClass: \"form-control\",\n        value: this.state.doc_name,\n        onChange: e => this.handleChange(e),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"col-md-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, React.createElement(ControlLabel, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, \"Document\"), React.createElement(FormControl, {\n        name: \"file_path\",\n        type: \"file\",\n        bsClass: \"form-control\",\n        onChange: this.getFile,\n        ref: ref => this.state.fileInput = ref,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      })))), React.createElement(Button, {\n        bsStyle: \"info\",\n        fill: true,\n        onClick: this.upload,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, \"Update Document\"), React.createElement(\"div\", {\n        className: \"clearfix\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      })), React.createElement(Table, {\n        striped: true,\n        hover: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, \"Document ID\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, \"Document Name\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, \"Created Date\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, \"Last Updated\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, \"Actions\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, this.state.doc_list.map((prop, key) => {\n        return React.createElement(\"tr\", {\n          key: key,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 210\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 211\n          },\n          __self: this\n        }, prop.doc_id), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 212\n          },\n          __self: this\n        }, prop.doc_name), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 213\n          },\n          __self: this\n        }, moment(prop.created_date).format(\"DD-MMM-YYYY\")), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 218\n          },\n          __self: this\n        }, moment(prop.created_date).format(\"DD-MMM-YYYY\")), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 223\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"col-md-2\",\n          onClick: () => this.downloadDocumnet(prop.doc_path),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 224\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          className: \"pe-7s-cloud-download\",\n          style: {\n            fontSize: 20\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 230\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"col-md-2\",\n          onClick: () => this.deleteDocument(prop.doc_id),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 235\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          className: \"pe-7s-trash\",\n          style: {\n            fontSize: 20\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 241\n          },\n          __self: this\n        }))));\n      })))),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    })))));\n  }\n\n}\n\nexport default CustomerDetail;","map":{"version":3,"sources":["/Users/naagalgates/Desktop/acme-challenge/Acme/src/views/CustomerDetail.jsx"],"names":["React","Component","moment","Grid","Row","Col","Table","FormGroup","ControlLabel","FormControl","Card","Button","style","CustomerDetail","constructor","props","match","state","_notificationSystem","doc_list","doc_name","fileInput","file_upload","cust_id","params","id","upload","bind","getFile","handleChange","e","setState","target","name","value","preventDefault","reader","FileReader","file","files","onloadend","theFile","data","blob","result","split","type","readAsDataURL","file_name","file_type","created_date","Date","toString","proxyurl","fetch","method","body","JSON","stringify","headers","then","response","json","getDocumentList","addNotification","title","message","level","position","autoDismiss","hits","downloadDocumnet","window","open","deleteDocument","doc_id","componentDidMount","refs","notificationSystem","render","padding","ref","map","prop","key","format","doc_path","fontSize"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,MAAP,MAAmB,QAAnB;AAEA,SACEC,IADF,EAEEC,GAFF,EAGEC,GAHF,EAIEC,KAJF,EAKEC,SALF,EAMEC,YANF,EAOEC,WAPF,QAQO,iBARP;AAUA,OAAOC,IAAP,MAAiB,0BAAjB;AACA,OAAOC,MAAP,MAAmB,0CAAnB;AACA,SAASC,KAAT,QAAsB,yBAAtB;;AAEA,MAAMC,cAAN,SAA6BZ,SAA7B,CAAuC;AACrCa,EAAAA,WAAW,CAACC,KAAD,EAAQ;AAAA,UACTC,KADS,GACCD,KADD,CACTC,KADS,EAEjB;;AACA,UAAMD,KAAN;AACA,SAAKE,KAAL,GAAa;AACXC,MAAAA,mBAAmB,EAAE,IADV;AAEXC,MAAAA,QAAQ,EAAE,EAFC;AAGXC,MAAAA,QAAQ,EAAE,EAHC;AAIXC,MAAAA,SAAS,EAAE,EAJA;AAKXC,MAAAA,WAAW,EAAE,EALF;AAMXC,MAAAA,OAAO,EAAEP,KAAK,CAACQ,MAAN,CAAaC;AANX,KAAb;AAQA,SAAKC,MAAL,GAAc,KAAKA,MAAL,CAAYC,IAAZ,CAAiB,IAAjB,CAAd;AACA,SAAKC,OAAL,GAAe,KAAKA,OAAL,CAAaD,IAAb,CAAkB,IAAlB,CAAf;AACD;;AAEDE,EAAAA,YAAY,CAACC,CAAD,EAAI;AACd,SAAKC,QAAL,CAAc;AACZ,OAACD,CAAC,CAACE,MAAF,CAASC,IAAV,GAAiBH,CAAC,CAACE,MAAF,CAASE;AADd,KAAd;AAGD;;AACDN,EAAAA,OAAO,CAACE,CAAD,EAAI;AACTA,IAAAA,CAAC,CAACK,cAAF;AACA,QAAIC,MAAM,GAAG,IAAIC,UAAJ,EAAb;AACA,QAAIC,IAAI,GAAGR,CAAC,CAACE,MAAF,CAASO,KAAT,CAAe,CAAf,CAAX;;AACAH,IAAAA,MAAM,CAACI,SAAP,GAAmBC,OAAO,IAAI;AAC5B,UAAIC,IAAI,GAAG;AACTC,QAAAA,IAAI,EAAEF,OAAO,CAACT,MAAR,CAAeY,MAAf,CAAsBC,KAAtB,CAA4B,GAA5B,EAAiC,CAAjC,CADG;AAETZ,QAAAA,IAAI,EAAEK,IAAI,CAACL,IAFF;AAGTa,QAAAA,IAAI,EAAER,IAAI,CAACQ;AAHF,OAAX,CAD4B,CAM5B;;AACA,WAAKf,QAAL,CAAc;AAAET,QAAAA,WAAW,EAAEoB;AAAf,OAAd;AACD,KARD;;AASAN,IAAAA,MAAM,CAACW,aAAP,CAAqBT,IAArB;AACD;;AAEDZ,EAAAA,MAAM,GAAG;AACP,QAAIF,MAAM,GAAG;AACXJ,MAAAA,QAAQ,EAAE,KAAKH,KAAL,CAAWG,QADV;AAEXuB,MAAAA,IAAI,EAAE,KAAK1B,KAAL,CAAWK,WAAX,CAAuBqB,IAFlB;AAGXK,MAAAA,SAAS,EAAE,KAAK/B,KAAL,CAAWK,WAAX,CAAuBW,IAHvB;AAIXgB,MAAAA,SAAS,EAAE,KAAKhC,KAAL,CAAWK,WAAX,CAAuB2B,SAJvB;AAKX1B,MAAAA,OAAO,EAAE,KAAKN,KAAL,CAAWM,OALT;AAMX2B,MAAAA,YAAY,EAAE,IAAIC,IAAJ,GAAWC,QAAX;AANH,KAAb,CADO,CASP;;AACA,UAAMC,QAAQ,GAAG,sCAAjB;AACAC,IAAAA,KAAK,CACHD,QAAQ,GACN,kEAFC,EAGH;AACEE,MAAAA,MAAM,EAAE,MADV;AAEEC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAelC,MAAf,CAFR;AAGEmC,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB;AAHX,KAHG,CAAL,CASGC,IATH,CASQC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EATpB,EAUGF,IAVH,CAUQlB,IAAI,IAAI;AACZ;AACA,WAAKqB,eAAL;AACA,WAAKhC,QAAL,CAAc;AAAEX,QAAAA,QAAQ,EAAE,EAAZ;AAAgBC,QAAAA,SAAS,EAAE;AAA3B,OAAd;;AACA,WAAKJ,KAAL,CAAWC,mBAAX,CAA+B8C,eAA/B,CAA+C;AAC7CC,QAAAA,KAAK,EAAE;AAAM,yBAAY,MAAlB;AAAyB,UAAA,SAAS,EAAC,aAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADsC;AAE7CC,QAAAA,OAAO,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4CAFoC;AAG7CC,QAAAA,KAAK,EAAE,SAHsC;AAI7CC,QAAAA,QAAQ,EAAE,IAJmC;AAK7CC,QAAAA,WAAW,EAAE;AALgC,OAA/C;AAOD,KArBH;AAsBD;;AACDN,EAAAA,eAAe,GAAG;AAChB,UAAMV,QAAQ,GAAG,sCAAjB;AACAC,IAAAA,KAAK,CACHD,QAAQ,GACN,uFADF,GAEE,KAAKpC,KAAL,CAAWM,OAHV,EAIH;AACEoC,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB;AADX,KAJG,CAAL,CAQGC,IARH,CAQQC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EARpB,EASGF,IATH,CASQlB,IAAI,IAAI;AACZ,WAAKX,QAAL,CAAc;AAAEZ,QAAAA,QAAQ,EAAEuB,IAAI,CAAC4B;AAAjB,OAAd,EADY,CAEZ;AACD,KAZH;AAaD;;AACDC,EAAAA,gBAAgB,CAACvB,SAAD,EAAY;AAC1B,UAAMK,QAAQ,GAAG,sCAAjB;AACAC,IAAAA,KAAK,CACHD,QAAQ,GACN,0FADF,GAEEL,SAHC,EAIH;AACEW,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB;AADX,KAJG,CAAL,CAQGC,IARH,CAQQC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EARpB,EASGF,IATH,CASQlB,IAAI,IAAI;AACZ;AACA8B,MAAAA,MAAM,CAACC,IAAP,CAAY/B,IAAI,CAACc,IAAjB,EAAuB,QAAvB;AACD,KAZH;AAaD;;AACDkB,EAAAA,cAAc,CAACC,MAAD,EAAS;AACrB,UAAMtB,QAAQ,GAAG,sCAAjB;AACAC,IAAAA,KAAK,CACHD,QAAQ,GACN,yEADF,GAEEsB,MAHC,EAIH;AACEpB,MAAAA,MAAM,EAAE,QADV;AAEEI,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB;AAFX,KAJG,CAAL,CASGC,IATH,CASQC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EATpB,EAUGF,IAVH,CAUQlB,IAAI,IAAI;AACZ,WAAKqB,eAAL,GADY,CAEZ;;AACA,WAAK9C,KAAL,CAAWC,mBAAX,CAA+B8C,eAA/B,CAA+C;AAC7CC,QAAAA,KAAK,EAAE;AAAM,yBAAY,MAAlB;AAAyB,UAAA,SAAS,EAAC,oBAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADsC;AAE7CC,QAAAA,OAAO,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CAFoC;AAG7CC,QAAAA,KAAK,EAAE,MAHsC;AAI7CC,QAAAA,QAAQ,EAAE,IAJmC;AAK7CC,QAAAA,WAAW,EAAE;AALgC,OAA/C;AAOD,KApBH;AAqBD;;AACDO,EAAAA,iBAAiB,GAAG;AAClB,SAAK7C,QAAL,CAAc;AAAEb,MAAAA,mBAAmB,EAAE,KAAK2D,IAAL,CAAUC;AAAjC,KAAd;AACA,QAAI5D,mBAAmB,GAAG,KAAK2D,IAAL,CAAUC,kBAApC;AACA,SAAKf,eAAL;AACD;;AACDgB,EAAAA,MAAM,GAAG;AACP,WACE;AAAK,MAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,kBAAD;AAAoB,MAAA,GAAG,EAAC,oBAAxB;AAA6C,MAAA,KAAK,EAAEnE,KAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEE,oBAAC,IAAD;AAAM,MAAA,KAAK,MAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,GAAD;AAAK,MAAA,EAAE,EAAE,EAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD;AACE,MAAA,KAAK,EAAC,iBADR;AAEE,MAAA,QAAQ,EAAC,EAFX;AAGE,MAAA,gBAAgB,MAHlB;AAIE,MAAA,iBAAiB,MAJnB;AAKE,MAAA,OAAO,EACL;AAAK,QAAA,KAAK,EAAE;AAAEoE,UAAAA,OAAO,EAAE;AAAX,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADF,EAEE,oBAAC,WAAD;AACE,QAAA,IAAI,EAAC,MADP;AAEE,QAAA,IAAI,EAAC,UAFP;AAGE,QAAA,OAAO,EAAC,cAHV;AAIE,QAAA,KAAK,EAAE,KAAK/D,KAAL,CAAWG,QAJpB;AAKE,QAAA,QAAQ,EAAEU,CAAC,IAAI,KAAKD,YAAL,CAAkBC,CAAlB,CALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CADF,CADF,EAaE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,EAEE,oBAAC,WAAD;AACE,QAAA,IAAI,EAAC,WADP;AAEE,QAAA,IAAI,EAAC,MAFP;AAGE,QAAA,OAAO,EAAC,cAHV;AAIE,QAAA,QAAQ,EAAE,KAAKF,OAJjB;AAKE,QAAA,GAAG,EAAEqD,GAAG,IAAK,KAAKhE,KAAL,CAAWI,SAAX,GAAuB4D,GALtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CADF,CAbF,CADF,EA2BE,oBAAC,MAAD;AAAQ,QAAA,OAAO,EAAC,MAAhB;AAAuB,QAAA,IAAI,MAA3B;AAA4B,QAAA,OAAO,EAAE,KAAKvD,MAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BA3BF,EA8BE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QA9BF,CADF,EAiCE,oBAAC,KAAD;AAAO,QAAA,OAAO,MAAd;AAAe,QAAA,KAAK,MAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAHF,EAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAJF,EAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBALF,CADF,CADF,EAUE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,KAAKT,KAAL,CAAWE,QAAX,CAAoB+D,GAApB,CAAwB,CAACC,IAAD,EAAOC,GAAP,KAAe;AACtC,eACE;AAAI,UAAA,GAAG,EAAEA,GAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAKD,IAAI,CAACR,MAAV,CADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAKQ,IAAI,CAAC/D,QAAV,CAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACGlB,MAAM,CAACiF,IAAI,CAACjC,YAAN,CAAN,CAA0BmC,MAA1B,CACC,aADD,CADH,CAHF,EAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACGnF,MAAM,CAACiF,IAAI,CAACjC,YAAN,CAAN,CAA0BmC,MAA1B,CACC,aADD,CADH,CARF,EAaE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AACE,UAAA,SAAS,EAAC,UADZ;AAEE,UAAA,OAAO,EAAE,MACP,KAAKd,gBAAL,CAAsBY,IAAI,CAACG,QAA3B,CAHJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAME;AACE,UAAA,SAAS,EAAC,sBADZ;AAEE,UAAA,KAAK,EAAE;AAAEC,YAAAA,QAAQ,EAAE;AAAZ,WAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UANF,CADF,EAYE;AACE,UAAA,SAAS,EAAC,UADZ;AAEE,UAAA,OAAO,EAAE,MACP,KAAKb,cAAL,CAAoBS,IAAI,CAACR,MAAzB,CAHJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAME;AACE,UAAA,SAAS,EAAC,aADZ;AAEE,UAAA,KAAK,EAAE;AAAEY,YAAAA,QAAQ,EAAE;AAAZ,WAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UANF,CAZF,CAbF,CADF;AAwCD,OAzCA,CADH,CAVF,CAjCF,CANJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF,CADF,CAFF,CADF;AA4GD;;AAlPoC;;AAqPvC,eAAe1E,cAAf","sourcesContent":["import React, { Component } from \"react\";\nimport moment from \"moment\";\n\nimport {\n  Grid,\n  Row,\n  Col,\n  Table,\n  FormGroup,\n  ControlLabel,\n  FormControl\n} from \"react-bootstrap\";\n\nimport Card from \"components/Card/Card.jsx\";\nimport Button from \"components/CustomButton/CustomButton.jsx\";\nimport { style } from \"variables/Variables.jsx\";\n\nclass CustomerDetail extends Component {\n  constructor(props) {\n    const { match } = props;\n    // console.log(match);\n    super(props);\n    this.state = {\n      _notificationSystem: null,\n      doc_list: [],\n      doc_name: \"\",\n      fileInput: \"\",\n      file_upload: {},\n      cust_id: match.params.id\n    };\n    this.upload = this.upload.bind(this);\n    this.getFile = this.getFile.bind(this);\n  }\n\n  handleChange(e) {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  }\n  getFile(e) {\n    e.preventDefault();\n    let reader = new FileReader();\n    let file = e.target.files[0];\n    reader.onloadend = theFile => {\n      var data = {\n        blob: theFile.target.result.split(\",\")[1],\n        name: file.name,\n        type: file.type\n      };\n      // console.log(data);\n      this.setState({ file_upload: data });\n    };\n    reader.readAsDataURL(file);\n  }\n\n  upload() {\n    let params = {\n      doc_name: this.state.doc_name,\n      blob: this.state.file_upload.blob,\n      file_name: this.state.file_upload.name,\n      file_type: this.state.file_upload.file_type,\n      cust_id: this.state.cust_id,\n      created_date: new Date().toString()\n    };\n    // console.log(params);\n    const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\n    fetch(\n      proxyurl +\n        \"https://pytpnxf5zi.execute-api.ap-southeast-2.amazonaws.com/DEV/\",\n      {\n        method: \"post\",\n        body: JSON.stringify(params),\n        headers: { \"Content-Type\": \"application/json\" }\n      }\n    )\n      .then(response => response.json())\n      .then(data => {\n        // console.log(data);\n        this.getDocumentList();\n        this.setState({ doc_name: \"\", fileInput: \"\" });\n        this.state._notificationSystem.addNotification({\n          title: <span data-notify=\"icon\" className=\"pe-7s-check\" />,\n          message: <div>Document Uploaded Successfully</div>,\n          level: \"success\",\n          position: \"tr\",\n          autoDismiss: 15\n        });\n      });\n  }\n  getDocumentList() {\n    const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\n    fetch(\n      proxyurl +\n        \"https://pytpnxf5zi.execute-api.ap-southeast-2.amazonaws.com/DEV?from=details&cust_id=\" +\n        this.state.cust_id,\n      {\n        headers: { \"Content-Type\": \"application/json\" }\n      }\n    )\n      .then(response => response.json())\n      .then(data => {\n        this.setState({ doc_list: data.hits });\n        // console.log(data);\n      });\n  }\n  downloadDocumnet(file_name) {\n    const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\n    fetch(\n      proxyurl +\n        \"https://pytpnxf5zi.execute-api.ap-southeast-2.amazonaws.com/DEV?from=download&file_name=\" +\n        file_name,\n      {\n        headers: { \"Content-Type\": \"application/json\" }\n      }\n    )\n      .then(response => response.json())\n      .then(data => {\n        // console.log(data);\n        window.open(data.body, \"_blank\");\n      });\n  }\n  deleteDocument(doc_id) {\n    const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\n    fetch(\n      proxyurl +\n        \"https://pytpnxf5zi.execute-api.ap-southeast-2.amazonaws.com/DEV?doc_id=\" +\n        doc_id,\n      {\n        method: \"delete\",\n        headers: { \"Content-Type\": \"application/json\" }\n      }\n    )\n      .then(response => response.json())\n      .then(data => {\n        this.getDocumentList();\n        // console.log(data);\n        this.state._notificationSystem.addNotification({\n          title: <span data-notify=\"icon\" className=\"pe-7s-close-circle\" />,\n          message: <div>Document Deleted Successfully</div>,\n          level: \"info\",\n          position: \"tr\",\n          autoDismiss: 15\n        });\n      });\n  }\n  componentDidMount() {\n    this.setState({ _notificationSystem: this.refs.notificationSystem });\n    var _notificationSystem = this.refs.notificationSystem;\n    this.getDocumentList();\n  }\n  render() {\n    return (\n      <div className=\"content\">\n        <NotificationSystem ref=\"notificationSystem\" style={style} />\n        <Grid fluid>\n          <Row>\n            <Col md={12}>\n              <Card\n                title=\"Customer Detail\"\n                category=\"\"\n                ctTableFullWidth\n                ctTableResponsive\n                content={\n                  <div style={{ padding: 20 }}>\n                    <form>\n                      <div className=\"row\">\n                        <div className=\"col-md-4\">\n                          <FormGroup>\n                            <ControlLabel>Document Name</ControlLabel>\n                            <FormControl\n                              type=\"text\"\n                              name=\"doc_name\"\n                              bsClass=\"form-control\"\n                              value={this.state.doc_name}\n                              onChange={e => this.handleChange(e)}\n                            />\n                          </FormGroup>\n                        </div>\n                        <div className=\"col-md-4\">\n                          <FormGroup>\n                            <ControlLabel>Document</ControlLabel>\n                            <FormControl\n                              name=\"file_path\"\n                              type=\"file\"\n                              bsClass=\"form-control\"\n                              onChange={this.getFile}\n                              ref={ref => (this.state.fileInput = ref)}\n                            />\n                          </FormGroup>\n                        </div>\n                      </div>\n                      <Button bsStyle=\"info\" fill onClick={this.upload}>\n                        Update Document\n                      </Button>\n                      <div className=\"clearfix\" />\n                    </form>\n                    <Table striped hover>\n                      <thead>\n                        <tr>\n                          <th>Document ID</th>\n                          <th>Document Name</th>\n                          <th>Created Date</th>\n                          <th>Last Updated</th>\n                          <th>Actions</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        {this.state.doc_list.map((prop, key) => {\n                          return (\n                            <tr key={key}>\n                              <td>{prop.doc_id}</td>\n                              <td>{prop.doc_name}</td>\n                              <td>\n                                {moment(prop.created_date).format(\n                                  \"DD-MMM-YYYY\"\n                                )}\n                              </td>\n                              <td>\n                                {moment(prop.created_date).format(\n                                  \"DD-MMM-YYYY\"\n                                )}\n                              </td>\n                              <td>\n                                <div\n                                  className=\"col-md-2\"\n                                  onClick={() =>\n                                    this.downloadDocumnet(prop.doc_path)\n                                  }\n                                >\n                                  <i\n                                    className=\"pe-7s-cloud-download\"\n                                    style={{ fontSize: 20 }}\n                                  />\n                                </div>\n                                <div\n                                  className=\"col-md-2\"\n                                  onClick={() =>\n                                    this.deleteDocument(prop.doc_id)\n                                  }\n                                >\n                                  <i\n                                    className=\"pe-7s-trash\"\n                                    style={{ fontSize: 20 }}\n                                  />\n                                </div>\n                              </td>\n                            </tr>\n                          );\n                        })}\n                      </tbody>\n                    </Table>\n                  </div>\n                }\n              />\n            </Col>\n          </Row>\n        </Grid>\n      </div>\n    );\n  }\n}\n\nexport default CustomerDetail;\n"]},"metadata":{},"sourceType":"module"}